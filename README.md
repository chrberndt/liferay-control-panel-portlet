# liferay-control-panel-portlet

A small sample project meant to investigate how to use a portlet in the control-panel.

## How To Use

Clone this repo to the `modules` directory of a liferay-workspace, 

```
cd $LIFERAY_WORKSPACE/modules
git clone https://github.com/chrberndt/liferay-control-panel-portlet.git
```

build, and deploy the portlet to your (development) server.

Since the `ACCESS_IN_CONTROL_PANEL` permission (together with 5 further permission) is generated by default, the `default.xml` is omitted.

```mysql
MariaDB [backend_developer]> SELECT * FROM ResourceAction WHERE name LIKE '%liferay_training%';
+-------------+------------------+---------------------------------------------------------------+-------------------------+--------------+
| mvccVersion | resourceActionId | name                                                          | actionId                | bitwiseValue |
+-------------+------------------+---------------------------------------------------------------+-------------------------+--------------+
|           0 |             2605 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | VIEW                    |            1 |
|           0 |             2606 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | ADD_TO_PAGE             |            2 |
|           0 |             2607 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | CONFIGURATION           |            4 |
|           0 |             2608 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | PERMISSIONS             |            8 |
|           0 |             2609 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | PREFERENCES             |           16 |
|           0 |             2610 | com_liferay_training_portlet_controlpanel_ControlPanelPortlet | ACCESS_IN_CONTROL_PANEL |           32 |
+-------------+------------------+---------------------------------------------------------------+-------------------------+--------------+
6 rows in set (0.01 sec)
```

## How To Test

1. Build and deploy the portlet to your (development) server.
1. Create a new regular user and add it to to the default site (e.g. Liferay DXP)
1. Login as regular user.
1. The *Control-Panel Portlet* is displayed in the Control-Panel and visible to the regular user
1. If the regular user clicks of the respective control panel entry, the *Control-Panel Portlet* is displayed to the user.
